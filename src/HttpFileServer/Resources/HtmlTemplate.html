<!DOCTYPE html>
<html dir="ltr" lang="zh">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="google" value="notranslate">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <style>
        /*!
        Pure v2.0.6
        Copyright 2013 Yahoo!
        Licensed under the BSD License.
        https://github.com/pure-css/pure/blob/master/LICENSE
        */
        /*!
        normalize.css v | MIT License | git.io/normalize
        Copyright (c) Nicolas Gallagher and Jonathan Neal
        */
        /*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */

        html {
            line-height: 1.15;
            -webkit-text-size-adjust: 100%
        }

        body {
            margin: 0
        }

        main {
            display: block
        }

        h1 {
            font-size: 2em;
            margin: .67em 0
        }

        hr {
            -webkit-box-sizing: content-box;
            box-sizing: content-box;
            height: 0;
            overflow: visible
        }

        pre {
            font-family: monospace,monospace;
            font-size: 1em
        }

        a {
            background-color: transparent
        }

        abbr[title] {
            border-bottom: none;
            text-decoration: underline;
            -webkit-text-decoration: underline dotted;
            text-decoration: underline dotted
        }

        b, strong {
            font-weight: bolder
        }

        code, kbd, samp {
            font-family: monospace,monospace;
            font-size: 1em
        }

        small {
            font-size: 80%
        }

        sub, sup {
            font-size: 75%;
            line-height: 0;
            position: relative;
            vertical-align: baseline
        }

        sub {
            bottom: -.25em
        }

        sup {
            top: -.5em
        }

        img {
            border-style: none
        }

        button, input, optgroup, select, textarea {
            font-family: inherit;
            font-size: 100%;
            line-height: 1.15;
            margin: 0
        }

        button, input {
            overflow: visible
        }

        button, select {
            text-transform: none
        }

        [type=button], [type=reset], [type=submit], button {
            -webkit-appearance: button
        }

            [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner, button::-moz-focus-inner {
                border-style: none;
                padding: 0
            }

            [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring, button:-moz-focusring {
                outline: 1px dotted ButtonText
            }

        fieldset {
            padding: .35em .75em .625em
        }

        legend {
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            color: inherit;
            display: table;
            max-width: 100%;
            padding: 0;
            white-space: normal
        }

        progress {
            vertical-align: baseline
        }

        textarea {
            overflow: auto
        }

        [type=checkbox], [type=radio] {
            -webkit-box-sizing: border-box;
            box-sizing: border-box;
            padding: 0
        }

        [type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button {
            height: auto
        }

        [type=search] {
            -webkit-appearance: textfield;
            outline-offset: -2px
        }

            [type=search]::-webkit-search-decoration {
                -webkit-appearance: none
            }

        ::-webkit-file-upload-button {
            -webkit-appearance: button;
            font: inherit
        }

        details {
            display: block
        }

        summary {
            display: list-item
        }

        template {
            display: none
        }

        [hidden] {
            display: none
        }

        html {
            font-family: sans-serif
        }

        .hidden, [hidden] {
            display: none !important
        }

        .pure-img {
            max-width: 100%;
            height: auto;
            display: block
        }

        .pure-g {
            letter-spacing: -.31em;
            text-rendering: optimizespeed;
            font-family: FreeSans,Arimo,"Droid Sans",Helvetica,Arial,sans-serif;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-box-direction: normal;
            -ms-flex-flow: row wrap;
            flex-flow: row wrap;
            -ms-flex-line-pack: start;
            align-content: flex-start
        }

        @media all and (-ms-high-contrast:none),(-ms-high-contrast:active) {
            table .pure-g {
                display: block
            }
        }

        .opera-only :-o-prefocus, .pure-g {
            word-spacing: -0.43em
        }

        .pure-u {
            display: inline-block;
            letter-spacing: normal;
            word-spacing: normal;
            vertical-align: top;
            text-rendering: auto
        }

        .pure-g [class*=pure-u] {
            font-family: sans-serif
        }

        .pure-u-1, .pure-u-1-1, .pure-u-1-12, .pure-u-1-2, .pure-u-1-24, .pure-u-1-3, .pure-u-1-4, .pure-u-1-5, .pure-u-1-6, .pure-u-1-8, .pure-u-10-24, .pure-u-11-12, .pure-u-11-24, .pure-u-12-24, .pure-u-13-24, .pure-u-14-24, .pure-u-15-24, .pure-u-16-24, .pure-u-17-24, .pure-u-18-24, .pure-u-19-24, .pure-u-2-24, .pure-u-2-3, .pure-u-2-5, .pure-u-20-24, .pure-u-21-24, .pure-u-22-24, .pure-u-23-24, .pure-u-24-24, .pure-u-3-24, .pure-u-3-4, .pure-u-3-5, .pure-u-3-8, .pure-u-4-24, .pure-u-4-5, .pure-u-5-12, .pure-u-5-24, .pure-u-5-5, .pure-u-5-6, .pure-u-5-8, .pure-u-6-24, .pure-u-7-12, .pure-u-7-24, .pure-u-7-8, .pure-u-8-24, .pure-u-9-24 {
            display: inline-block;
            letter-spacing: normal;
            word-spacing: normal;
            vertical-align: top;
            text-rendering: auto
        }

        .pure-u-1-24 {
            width: 4.1667%
        }

        .pure-u-1-12, .pure-u-2-24 {
            width: 8.3333%
        }

        .pure-u-1-8, .pure-u-3-24 {
            width: 12.5%
        }

        .pure-u-1-6, .pure-u-4-24 {
            width: 16.6667%
        }

        .pure-u-1-5 {
            width: 20%
        }

        .pure-u-5-24 {
            width: 20.8333%
        }

        .pure-u-1-4, .pure-u-6-24 {
            width: 25%
        }

        .pure-u-7-24 {
            width: 29.1667%
        }

        .pure-u-1-3, .pure-u-8-24 {
            width: 33.3333%
        }

        .pure-u-3-8, .pure-u-9-24 {
            width: 37.5%
        }

        .pure-u-2-5 {
            width: 40%
        }

        .pure-u-10-24, .pure-u-5-12 {
            width: 41.6667%
        }

        .pure-u-11-24 {
            width: 45.8333%
        }

        .pure-u-1-2, .pure-u-12-24 {
            width: 50%
        }

        .pure-u-13-24 {
            width: 54.1667%
        }

        .pure-u-14-24, .pure-u-7-12 {
            width: 58.3333%
        }

        .pure-u-3-5 {
            width: 60%
        }

        .pure-u-15-24, .pure-u-5-8 {
            width: 62.5%
        }

        .pure-u-16-24, .pure-u-2-3 {
            width: 66.6667%
        }

        .pure-u-17-24 {
            width: 70.8333%
        }

        .pure-u-18-24, .pure-u-3-4 {
            width: 75%
        }

        .pure-u-19-24 {
            width: 79.1667%
        }

        .pure-u-4-5 {
            width: 80%
        }

        .pure-u-20-24, .pure-u-5-6 {
            width: 83.3333%
        }

        .pure-u-21-24, .pure-u-7-8 {
            width: 87.5%
        }

        .pure-u-11-12, .pure-u-22-24 {
            width: 91.6667%
        }

        .pure-u-23-24 {
            width: 95.8333%
        }

        .pure-u-1, .pure-u-1-1, .pure-u-24-24, .pure-u-5-5 {
            width: 100%
        }

        .pure-button {
            display: inline-block;
            line-height: normal;
            white-space: nowrap;
            vertical-align: middle;
            text-align: center;
            cursor: pointer;
            -webkit-user-drag: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

            .pure-button::-moz-focus-inner {
                padding: 0;
                border: 0
            }

        .pure-button-group {
            letter-spacing: -.31em;
            text-rendering: optimizespeed
        }

        .opera-only :-o-prefocus, .pure-button-group {
            word-spacing: -0.43em
        }

            .pure-button-group .pure-button {
                letter-spacing: normal;
                word-spacing: normal;
                vertical-align: top;
                text-rendering: auto
            }

        .pure-button {
            font-family: inherit;
            font-size: 100%;
            padding: .5em 1em;
            color: rgba(0,0,0,.8);
            border: none transparent;
            background-color: #e6e6e6;
            text-decoration: none;
            border-radius: 2px
        }

            .pure-button-hover, .pure-button:focus, .pure-button:hover {
                background-image: -webkit-gradient(linear,left top,left bottom,from(transparent),color-stop(40%,rgba(0,0,0,.05)),to(rgba(0,0,0,.1)));
                background-image: linear-gradient(transparent,rgba(0,0,0,.05) 40%,rgba(0,0,0,.1))
            }

            .pure-button:focus {
                outline: 0
            }

            .pure-button-active, .pure-button:active {
                -webkit-box-shadow: 0 0 0 1px rgba(0,0,0,.15) inset,0 0 6px rgba(0,0,0,.2) inset;
                box-shadow: 0 0 0 1px rgba(0,0,0,.15) inset,0 0 6px rgba(0,0,0,.2) inset;
                border-color: #000
            }

            .pure-button-disabled, .pure-button-disabled:active, .pure-button-disabled:focus, .pure-button-disabled:hover, .pure-button[disabled] {
                border: none;
                background-image: none;
                opacity: .4;
                cursor: not-allowed;
                -webkit-box-shadow: none;
                box-shadow: none;
                pointer-events: none
            }

        .pure-button-hidden {
            display: none
        }

        .pure-button-primary, .pure-button-selected, a.pure-button-primary, a.pure-button-selected {
            background-color: #0078e7;
            color: #fff
        }

        .pure-button-group .pure-button {
            margin: 0;
            border-radius: 0;
            border-right: 1px solid rgba(0,0,0,.2)
        }

            .pure-button-group .pure-button:first-child {
                border-top-left-radius: 2px;
                border-bottom-left-radius: 2px
            }

            .pure-button-group .pure-button:last-child {
                border-top-right-radius: 2px;
                border-bottom-right-radius: 2px;
                border-right: none
            }

        .pure-form input[type=color], .pure-form input[type=date], .pure-form input[type=datetime-local], .pure-form input[type=datetime], .pure-form input[type=email], .pure-form input[type=month], .pure-form input[type=number], .pure-form input[type=password], .pure-form input[type=search], .pure-form input[type=tel], .pure-form input[type=text], .pure-form input[type=time], .pure-form input[type=url], .pure-form input[type=week], .pure-form select, .pure-form textarea {
            padding: .5em .6em;
            display: inline-block;
            border: 1px solid #ccc;
            -webkit-box-shadow: inset 0 1px 3px #ddd;
            box-shadow: inset 0 1px 3px #ddd;
            border-radius: 4px;
            vertical-align: middle;
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        .pure-form input:not([type]) {
            padding: .5em .6em;
            display: inline-block;
            border: 1px solid #ccc;
            -webkit-box-shadow: inset 0 1px 3px #ddd;
            box-shadow: inset 0 1px 3px #ddd;
            border-radius: 4px;
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        .pure-form input[type=color] {
            padding: .2em .5em
        }

            .pure-form input[type=color]:focus, .pure-form input[type=date]:focus, .pure-form input[type=datetime-local]:focus, .pure-form input[type=datetime]:focus, .pure-form input[type=email]:focus, .pure-form input[type=month]:focus, .pure-form input[type=number]:focus, .pure-form input[type=password]:focus, .pure-form input[type=search]:focus, .pure-form input[type=tel]:focus, .pure-form input[type=text]:focus, .pure-form input[type=time]:focus, .pure-form input[type=url]:focus, .pure-form input[type=week]:focus, .pure-form select:focus, .pure-form textarea:focus {
                outline: 0;
                border-color: #129fea
            }

        .pure-form input:not([type]):focus {
            outline: 0;
            border-color: #129fea
        }

        .pure-form input[type=checkbox]:focus, .pure-form input[type=file]:focus, .pure-form input[type=radio]:focus {
            outline: thin solid #129FEA;
            outline: 1px auto #129FEA
        }

        .pure-form .pure-checkbox, .pure-form .pure-radio {
            margin: .5em 0;
            display: block
        }

        .pure-form input[type=color][disabled], .pure-form input[type=date][disabled], .pure-form input[type=datetime-local][disabled], .pure-form input[type=datetime][disabled], .pure-form input[type=email][disabled], .pure-form input[type=month][disabled], .pure-form input[type=number][disabled], .pure-form input[type=password][disabled], .pure-form input[type=search][disabled], .pure-form input[type=tel][disabled], .pure-form input[type=text][disabled], .pure-form input[type=time][disabled], .pure-form input[type=url][disabled], .pure-form input[type=week][disabled], .pure-form select[disabled], .pure-form textarea[disabled] {
            cursor: not-allowed;
            background-color: #eaeded;
            color: #cad2d3
        }

        .pure-form input:not([type])[disabled] {
            cursor: not-allowed;
            background-color: #eaeded;
            color: #cad2d3
        }

        .pure-form input[readonly], .pure-form select[readonly], .pure-form textarea[readonly] {
            background-color: #eee;
            color: #777;
            border-color: #ccc
        }

        .pure-form input:focus:invalid, .pure-form select:focus:invalid, .pure-form textarea:focus:invalid {
            color: #b94a48;
            border-color: #e9322d
        }

        .pure-form input[type=checkbox]:focus:invalid:focus, .pure-form input[type=file]:focus:invalid:focus, .pure-form input[type=radio]:focus:invalid:focus {
            outline-color: #e9322d
        }

        .pure-form select {
            height: 2.25em;
            border: 1px solid #ccc;
            background-color: #fff
        }

            .pure-form select[multiple] {
                height: auto
            }

        .pure-form label {
            margin: .5em 0 .2em
        }

        .pure-form fieldset {
            margin: 0;
            padding: .35em 0 .75em;
            border: 0
        }

        .pure-form legend {
            display: block;
            width: 100%;
            padding: .3em 0;
            margin-bottom: .3em;
            color: #333;
            border-bottom: 1px solid #e5e5e5
        }

        .pure-form-stacked input[type=color], .pure-form-stacked input[type=date], .pure-form-stacked input[type=datetime-local], .pure-form-stacked input[type=datetime], .pure-form-stacked input[type=email], .pure-form-stacked input[type=file], .pure-form-stacked input[type=month], .pure-form-stacked input[type=number], .pure-form-stacked input[type=password], .pure-form-stacked input[type=search], .pure-form-stacked input[type=tel], .pure-form-stacked input[type=text], .pure-form-stacked input[type=time], .pure-form-stacked input[type=url], .pure-form-stacked input[type=week], .pure-form-stacked label, .pure-form-stacked select, .pure-form-stacked textarea {
            display: block;
            margin: .25em 0
        }

        .pure-form-stacked input:not([type]) {
            display: block;
            margin: .25em 0
        }

        .pure-form-aligned input, .pure-form-aligned select, .pure-form-aligned textarea, .pure-form-message-inline {
            display: inline-block;
            vertical-align: middle
        }

        .pure-form-aligned textarea {
            vertical-align: top
        }

        .pure-form-aligned .pure-control-group {
            margin-bottom: .5em
        }

            .pure-form-aligned .pure-control-group label {
                text-align: right;
                display: inline-block;
                vertical-align: middle;
                width: 10em;
                margin: 0 1em 0 0
            }

        .pure-form-aligned .pure-controls {
            margin: 1.5em 0 0 11em
        }

        .pure-form .pure-input-rounded, .pure-form input.pure-input-rounded {
            border-radius: 2em;
            padding: .5em 1em
        }

        .pure-form .pure-group fieldset {
            margin-bottom: 10px
        }

        .pure-form .pure-group input, .pure-form .pure-group textarea {
            display: block;
            padding: 10px;
            margin: 0 0 -1px;
            border-radius: 0;
            position: relative;
            top: -1px
        }

            .pure-form .pure-group input:focus, .pure-form .pure-group textarea:focus {
                z-index: 3
            }

            .pure-form .pure-group input:first-child, .pure-form .pure-group textarea:first-child {
                top: 1px;
                border-radius: 4px 4px 0 0;
                margin: 0
            }

                .pure-form .pure-group input:first-child:last-child, .pure-form .pure-group textarea:first-child:last-child {
                    top: 1px;
                    border-radius: 4px;
                    margin: 0
                }

            .pure-form .pure-group input:last-child, .pure-form .pure-group textarea:last-child {
                top: -2px;
                border-radius: 0 0 4px 4px;
                margin: 0
            }

        .pure-form .pure-group button {
            margin: .35em 0
        }

        .pure-form .pure-input-1 {
            width: 100%
        }

        .pure-form .pure-input-3-4 {
            width: 75%
        }

        .pure-form .pure-input-2-3 {
            width: 66%
        }

        .pure-form .pure-input-1-2 {
            width: 50%
        }

        .pure-form .pure-input-1-3 {
            width: 33%
        }

        .pure-form .pure-input-1-4 {
            width: 25%
        }

        .pure-form-message-inline {
            display: inline-block;
            padding-left: .3em;
            color: #666;
            vertical-align: middle;
            font-size: .875em
        }

        .pure-form-message {
            display: block;
            color: #666;
            font-size: .875em
        }

        @media only screen and (max-width :480px) {
            .pure-form button[type=submit] {
                margin: .7em 0 0
            }

            .pure-form input:not([type]), .pure-form input[type=color], .pure-form input[type=date], .pure-form input[type=datetime-local], .pure-form input[type=datetime], .pure-form input[type=email], .pure-form input[type=month], .pure-form input[type=number], .pure-form input[type=password], .pure-form input[type=search], .pure-form input[type=tel], .pure-form input[type=text], .pure-form input[type=time], .pure-form input[type=url], .pure-form input[type=week], .pure-form label {
                margin-bottom: .3em;
                display: block
            }

            .pure-group input:not([type]), .pure-group input[type=color], .pure-group input[type=date], .pure-group input[type=datetime-local], .pure-group input[type=datetime], .pure-group input[type=email], .pure-group input[type=month], .pure-group input[type=number], .pure-group input[type=password], .pure-group input[type=search], .pure-group input[type=tel], .pure-group input[type=text], .pure-group input[type=time], .pure-group input[type=url], .pure-group input[type=week] {
                margin-bottom: 0
            }

            .pure-form-aligned .pure-control-group label {
                margin-bottom: .3em;
                text-align: left;
                display: block;
                width: 100%
            }

            .pure-form-aligned .pure-controls {
                margin: 1.5em 0 0 0
            }

            .pure-form-message, .pure-form-message-inline {
                display: block;
                font-size: .75em;
                padding: .2em 0 .8em
            }
        }

        .pure-menu {
            -webkit-box-sizing: border-box;
            box-sizing: border-box
        }

        .pure-menu-fixed {
            position: fixed;
            left: 0;
            top: 0;
            z-index: 3
        }

        .pure-menu-item, .pure-menu-list {
            position: relative
        }

        .pure-menu-list {
            list-style: none;
            margin: 0;
            padding: 0
        }

        .pure-menu-item {
            padding: 0;
            margin: 0;
            height: 100%
        }

        .pure-menu-heading, .pure-menu-link {
            display: block;
            text-decoration: none;
            white-space: nowrap
        }

        .pure-menu-horizontal {
            width: 100%;
            white-space: nowrap
        }

            .pure-menu-horizontal .pure-menu-list {
                display: inline-block
            }

            .pure-menu-horizontal .pure-menu-heading, .pure-menu-horizontal .pure-menu-item, .pure-menu-horizontal .pure-menu-separator {
                display: inline-block;
                vertical-align: middle
            }

        .pure-menu-item .pure-menu-item {
            display: block
        }

        .pure-menu-children {
            display: none;
            position: absolute;
            left: 100%;
            top: 0;
            margin: 0;
            padding: 0;
            z-index: 3
        }

        .pure-menu-horizontal .pure-menu-children {
            left: 0;
            top: auto;
            width: inherit
        }

        .pure-menu-active > .pure-menu-children, .pure-menu-allow-hover:hover > .pure-menu-children {
            display: block;
            position: absolute
        }

        .pure-menu-has-children > .pure-menu-link:after {
            padding-left: .5em;
            content: "\25B8";
            font-size: small
        }

        .pure-menu-horizontal .pure-menu-has-children > .pure-menu-link:after {
            content: "\25BE"
        }

        .pure-menu-scrollable {
            overflow-y: scroll;
            overflow-x: hidden
        }

            .pure-menu-scrollable .pure-menu-list {
                display: block
            }

        .pure-menu-horizontal.pure-menu-scrollable .pure-menu-list {
            display: inline-block
        }

        .pure-menu-horizontal.pure-menu-scrollable {
            white-space: nowrap;
            overflow-y: hidden;
            overflow-x: auto;
            padding: .5em 0
        }

        .pure-menu-horizontal .pure-menu-children .pure-menu-separator, .pure-menu-separator {
            background-color: #ccc;
            height: 1px;
            margin: .3em 0
        }

        .pure-menu-horizontal .pure-menu-separator {
            width: 1px;
            height: 1.3em;
            margin: 0 .3em
        }

        .pure-menu-horizontal .pure-menu-children .pure-menu-separator {
            display: block;
            width: auto
        }

        .pure-menu-heading {
            text-transform: uppercase;
            color: #565d64
        }

        .pure-menu-link {
            color: #777
        }

        .pure-menu-children {
            background-color: #fff
        }

        .pure-menu-heading, .pure-menu-link {
            padding: .5em 1em
        }

        .pure-menu-disabled {
            opacity: .5
        }

            .pure-menu-disabled .pure-menu-link:hover {
                background-color: transparent;
                cursor: default
            }

        .pure-menu-active > .pure-menu-link, .pure-menu-link:focus, .pure-menu-link:hover {
            background-color: #eee
        }

        .pure-menu-selected > .pure-menu-link, .pure-menu-selected > .pure-menu-link:visited {
            color: #000
        }

        .pure-table {
            border-collapse: collapse;
            border-spacing: 0;
            empty-cells: show;
            border: 1px solid #cbcbcb
        }

            .pure-table caption {
                color: #000;
                font: italic 85%/1 arial,sans-serif;
                padding: 1em 0;
                text-align: center
            }

            .pure-table td, .pure-table th {
                border-left: 1px solid #cbcbcb;
                border-width: 0 0 0 1px;
                font-size: inherit;
                margin: 0;
                overflow: visible;
                padding: .5em 1em
            }

            .pure-table thead {
                background-color: #e0e0e0;
                color: #000;
                text-align: left;
                vertical-align: bottom
            }

            .pure-table td {
                background-color: transparent
            }

        .pure-table-odd td {
            background-color: #f2f2f2
        }

        .pure-table-striped tr:nth-child(2n-1) td {
            background-color: #f2f2f2
        }

        .pure-table-bordered td {
            border-bottom: 1px solid #cbcbcb
        }

        .pure-table-bordered tbody > tr:last-child > td {
            border-bottom-width: 0
        }

        .pure-table-horizontal td, .pure-table-horizontal th {
            border-width: 0 0 1px 0;
            border-bottom: 1px solid #cbcbcb
        }

        .pure-table-horizontal tbody > tr:last-child > td {
            border-bottom-width: 0
        }

        /* 优化表格布局和自适应宽度 */
        .pure-table {
            width: 100%;
            table-layout: fixed;
        }

        th, td {
            padding: 0.5em0.5em;
            margin: 0;
            border-bottom: 1px #aaa5 solid;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

            th:nth-child(1), td.filename {
                width: 60%;
            }

            th:nth-child(2), td.filesize {
                width: 18%;
                min-width: 70px;
            }

            th:nth-child(3), td.filetime {
                width: 22%;
                min-width: 90px;
            }

        @media (max-width:600px) {
            th, td {
                font-size: 12px;
                padding: 0.3em0.2em;
            }

                th:nth-child(1), td.filename {
                    width: 55%;
                }

                th:nth-child(2), td.filesize {
                    width: 22%;
                    min-width: 50px;
                }

                th:nth-child(3), td.filetime {
                    width: 23%;
                    min-width: 60px;
                }
        }

        /* 移除多余留白 */
        td {
            margin: 0;
        }

            /* 文件名列允许自动换行 */
            th:nth-child(1), td.filename {
                width: 60%;
                white-space: normal;
                word-break: break-all;
            }

        @media (max-width:600px) {
            th:nth-child(1), td.filename {
                width: 55%;
                white-space: normal;
                word-break: break-all;
            }
        }
        /* 保证 a.icon也能换行 */
        td.filename, td.filename a.icon {
            white-space: normal !important;
            word-break: break-all !important;
            word-wrap: break-word !important;
            display: block !important;
            max-width: 100% !important;
        }
    </style>
    <style>

        h1 {
            border-bottom: 1px solid #c0c0c0;
            margin-bottom: 10px;
            padding-bottom: 10px;
            white-space: nowrap;
        }

        body {
            width: 100%;
            font-family: 'Microsoft YaHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        table {
            border-collapse: collapse;
            width: 100%;
        }

        th {
            cursor: pointer;
            text-align: left;
            color: #6e6e6e;
            border-bottom: 1px #aac solid;
        }

        tr {
            height: 35px;
        }

        td {
            border-bottom: 1px #aaa5 solid;
            margin-left: 15px;
            margin-top: 5px;
            margin-right: 50px;
            min-width: 160px;
        }

            td.detailsColumn {
                -webkit-padding-start: 2em;
                text-align: end;
                white-space: nowrap;
            }

        a {
            text-decoration: none;
        }

            a:hover {
                text-decoration: underline;
            }

            a.icon {
                -webkit-padding-start: 1.5em;
                text-decoration: none;
                user-select: auto;
            }

                a.icon:hover {
                    text-decoration: underline;
                }

            a.file {
                background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAAABnRSTlMAAAAAAABupgeRAAABHUlEQVR42o2RMW7DIBiF3498iHRJD5JKHurL+CRVBp+i2T16tTynF2gO0KSb5ZrBBl4HHDBuK/WXACH4eO9/CAAAbdvijzLGNE1TVZXfZuHg6XCAQESAZXbOKaXO57eiKG6ft9PrKQIkCQqFoIiQFBGlFIB5nvM8t9aOX2Nd18oDzjnPgCDpn/BH4zh2XZdlWVmWiUK4IgCBoFMUz9eP6zRN75cLgEQhcmTQIbl72O0f9865qLAAsURAAgKBJKEtgLXWvyjLuFsThCSstb8rBCaAQhDYWgIZ7myM+TUBjDHrHlZcbMYYk34cN0YSLcgS+wL0fe9TXDMbY33fR2AYBvyQ8L0Gk8MwREBrTfKe4TpTzwhArXWi8HI84h/1DfwI5mhxJamFAAAAAElFTkSuQmCC ") left top no-repeat;
            }

            a.dir {
                background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYUR5ccllPAAAAd5JREFUeNqMU79rFUEQ/vbuodFEEkzAImBpkUabFP4ldpaJhZXYm/RiZWsv/hkWFglBUyTIgyAIIfgIRjHv3r39MePM7N3LcbxAFvZ2b2bn22/mm3XMjF+HL3YW7q28YSIw8mBKoBihhhgCsoORot9d3/ywg3YowMXwNde/PzGnk2vn6PitrT+/PGeNaecg4+qNY3D43vy16A5wDDd4Aqg/ngmrjl/GoN0U5V1QquHQG3q+TPDVhVwyBffcmQGJmSVfyZk7R3SngI4JKfwDJ2+05zIg8gbiereTZRHhJ5KCMOwDFLjhoBTn2g0ghagfKeIYJDPFyibJVBtTREwq60SpYvh5++PpwatHsxSm9QRLSQpEVSd7/TYJUb49TX7gztpjjEffnoVw66+Ytovs14Yp7HaKmUXeX9rKUoMoLNW3srqI5fWn8JejrVkK0QcrkFLOgS39yoKUQe292WJ1guUHG8K2o8K00oO1BTvXoW4yasclUTgZYJY9aFNfAThX5CZRmczAV52oAPoupHhWRIUUAOoyUIlYVaAa/VbLbyiZUiyFbjQFNwiZQSGl4IDy9sO5Wrty0QLKhdZPxmgGcDo8ejn+c/6eiK9poz15Kw7Dr/vN/z6W7q++091/AQYA5mZ8GYJ9K0AAAAAASUVORK5CYII= ") left top no-repeat;
            }

            a.up {
                background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYUR5ccllPAAAAmlJREFUeNpsU0toU0EUPfPysx/tTxuDH9SCWhUDooIbd7oRUUTMouqi2iIoCO6lceHWhegy4EJFinWjrlQUpVm0IIoFpVDEIthm0dpikpf3ZuZ6Z94nrXhhMjM3c8895977BBHB2PznK8WPtDgyWH5q77cPH8PpdXuhpQT4ifR9u5sfJb1bmw6VivahATDrxcRZ2njfoaMv+2j7mLDn93MPiNRMvGbL18L9IpF8h9/TN+EYkMffSiOXJ5+hkD+PdqcLpICWHOHc2CC+LEyA/K+cKQMnlQHJX8wqYG3MAJy88Wa4OLDvEqAEOpJd0LxHIMdHBziowSwVlF8D6QaicK01krw/JynwcKoEwZczewroTvZirlKJs5CqQ5CG8pb57FnJUA0LYCXMX5fibd+p8LWDDemcPZbzQyjvH+Ki1TlIciElA7ghwLKV4kRZstt2sANWRjYTAGzuP2hXZFpJ/GsxgGJ0ox1aoFWsDXyyxqCs26+ydmagFN/rRjymJ1898bzGzmQE0HCZpmk5A0RFIv8Pn0WYPsiu6t/Rsj6PauVTwffTSzGAGZhUG2F06hEc9ibS7OPMNp6ErYFlKavo7MkhmTqCxZ/jwzGA9Hx82H2BZSw1NTN9Gx8ycHkajU/7M+jInsDC7DiaEmo1bNl1AMr9ASFgqVu9MCTIzoGUimXVAnnaN0PdBBDCCYbEtMk6wkpQwIG0sn0PQIUF4GsTwLSIFKNqF6DVrQq+IWVrQDxAYQC/1SsYOI4pOxKZrfifiUSbDUisif7XlpGIPufXd/uvdvZm760M0no1FZcnrzUdjw7au3vu/BVgAFLXeuTxhTXVAAAAAElFTkSuQmCC ") left top no-repeat;
            }

        html[dir=rtl] a {
            background-position-x: right;
        }

        .thname {
        }

        .thsize {
        }

        .thtime {
        }

        .tdsize {
            color: #353535;
        }

        .tdtime {
            color: #aaa;
        }
    </style>
    <style>
        * {
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }

        html {
            width: 100%;
            height: 100%;
        }

        body {
            line-height: 1.7em;
            color: #7f8c8d;
            font-size: 13px;
            display: flex;
            flex-direction: column;
            height: 100%;
            width: 100%;
        }

        h1,
        h2,
        h3,
        h4,
        h5,
        h6,
        label {
            color: #333333;
        }

        .header {
            flex: none;
            padding: 0 16px;
            background-color: #b3c0d1;
            overflow-x: auto;
            white-space: nowrap;
        }

        .main {
            flex: auto;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: #e9eef3;
        }

        .footer {
            flex: none;
            background-color: #d3dce6;
            padding: 16px;
            text-align: center;
            color: #000000;
        }

        .pure-table {
            width: 100%;
        }

        .dialog-box {
            position: fixed;
            width: 100%;
            height: 100%;
            display: none;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.4);
            transition: all ease 03s;
        }

        .dialog-main {
            width: 60%;
            max-height: 70%;
            background-color: #ffffff;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            border-radius: 4px;
        }

        .dialog-header {
            padding: 8px 16px;
        }

        .dialog-body {
            flex: auto;
            width: 100%;
            height: 100%;
            overflow: auto;
        }

        .dialog-footer {
            padding: 8px 16px;
            text-align: right;
        }

        .button-success {
            background: rgb(28, 184, 65);
            color: #ffffff;
        }

        .contextmenu {
            display: none;
            position: absolute;
            padding: 4px 12px;
            background-color: #fff;
            box-shadow: 0px 0px 6px #bebebe;
            border-radius: 3px;
            cursor: pointer;
        }

        /*允许面包屑导航换行 */
        .header {
            white-space: normal;
            word-break: break-all;
        }
            /* 如果面包屑是 h1 或其他元素，也允许换行 */
            .header h1, .header .breadcrumb {
                white-space: normal;
                word-break: break-all;
                display: block;
            }
    </style>
    <style>
        .preview-float {
            position: fixed;
            z-index: 9999;
            background: #fff;
            border: 1px solid #ccc;
            box-shadow: 02px8px #888;
            max-width: 600px;
            max-height: 400px;
            overflow: auto;
            padding: 8px;
        }
    </style>
    <title id="title">{{title}}</title>
</head>

<body>
    <section class="header">
        <h1 id="header">{{header}}</h1>
    </section>

    <section class="main">
        <table class="pure-table">
            <thead>
                <tr>
                    <th>文件名称</th>
                    <th>文件大小</th>
                    <th>修改时间</th>
                </tr>
            </thead>
            <tbody id="serverFiles">
                {{tableRows}}
            </tbody>
        </table>
    </section>
    <section class="footer">
        {{footerSectionContent}}
    </section>

    <!-- 右键菜单 -->
    <section id="contextmenu" class="contextmenu">
        <div data-type="download">打包下载</div>
        <div data-type="preview">预览</div>
    </section>
    <!-- 右键菜单 -->
    {{uploadSection}}

    <script>
        // 右键菜单
        document.getElementById('serverFiles').addEventListener('contextmenu', (e) => {
            e.preventDefault()
            const isDir = e.target.className === 'icon dir'
            const isFile = e.target.className === 'icon file'
            const contextMenu = document.getElementById('contextmenu')
            contextMenu.style.display = 'none';
            if (!isDir && !isFile) return
            const menuWidth = contextMenu.offsetWidth;
            const menuHeight = contextMenu.offsetHeight;

            let x = e.clientX, y = e.clientY;

            if (x + menuWidth > window.innerWidth) {
                x = window.innerWidth - menuWidth; // 调整水平位置
            }

            if (y + menuHeight > window.innerHeight) {
                y = window.innerHeight - menuHeight; // 调整垂直位置
            }

            const downloadEle = contextMenu.children[0]
            downloadEle.dataset.url = e.target.href // 修正：不再slice(0, -1)
            //预览按钮只对常见可预览文件显示
            const previewEle = contextMenu.children[1]
            if (isFile && /\.(txt|md|log|csv|json|xml|jpg|jpeg|png|gif|bmp|webp|pdf|html|htm)$/i.test(e.target.href)) {
                previewEle.style.display = ''
                previewEle.dataset.url = e.target.href // 修正：不再slice(0, -1)
            } else {
                previewEle.style.display = 'none'
            }

            contextMenu.style.top = `${y}px`;
            contextMenu.style.left = `${x}px`;
            contextMenu.style.display = 'block';
        })

        document.addEventListener('click', (e) => {
            const contextMenu = document.getElementById('contextmenu')
            contextMenu.style.display = 'none';
        })

        document.getElementById('contextmenu').addEventListener('click', (event) => {
            const type = event.target.dataset.type
            if (type === 'download') {
                const url = event.target.dataset.url
                downloadZip(url)
            }
            if (type === 'preview') {
                const url = event.target.dataset.url
                previewFile(url)
            }
        })

        function downloadZip(url) {
            if (!url) return;
            if (!url.includes('?download=1')) {
                if (url.includes('?')) {
                    url += '&download=1';
                } else {
                    url += '?download=1';
                }
            }
            window.open(url, '_blank');
        }
        // 修复 preview 参数拼写
        function previewFile(url) {
            if (!url) return;
            if (!url.includes('?preview=1')) {
   if (url.includes('?')) {
      url += '&preview=1';
        } else {
   url += '?preview=1';
   }
    }
    window.open(url, '_blank');
        }
        // 预览按钮只对常见可预览文件显示（含md）
        document.getElementById('contextmenu').addEventListener('click', (event) => {
    const type = event.target.dataset.type
    if (type === 'download') {
    const url = event.target.dataset.url
    downloadZip(url)
    }
if (type === 'preview') {
   const url = event.target.dataset.url
   previewFile(url)
    }
});

        let previewTimer = null;
        let previewFloat = null;

        document.getElementById('serverFiles').addEventListener('mouseover', function (e) {
            if (e.target.className === 'icon file' && /\.(txt|md|log|csv|json|xml|jpg|jpeg|png|gif|bmp|webp|pdf|html|htm)$/i.test(e.target.href)) {
                previewTimer = setTimeout(() => {
                    showPreviewFloat(e.target);
                }, 1000);
            }
        });
        document.getElementById('serverFiles').addEventListener('mouseout', function (e) {
            if (previewTimer) {
                clearTimeout(previewTimer);
                previewTimer = null;
            }
            if (previewFloat) {
                document.body.removeChild(previewFloat);
                previewFloat = null;
            }
        });

        function showPreviewFloat(target) {
            const filePath = target.href;
            // const fileName = filePath.split('/').pop();
            const fileName = decodeURIComponent(filePath.split('/').pop());
            const fileExtension = fileName.split('.').pop().toLowerCase();
            let previewContent = '';

            // 根据文件类型生成不同的预览内容
            if (/\.(jpg|jpeg|png|gif|bmp|webp)$/.test(filePath)) {
                previewContent = `<img src="${filePath}" style="max-width:100%;max-height:300px;" />`;
            } else if (/\.(txt|md|log|csv|json|xml)$/.test(filePath)) {
                previewContent = `<iframe src="${filePath}" style="width:100%;height:300px;"></iframe>`;
            } else {
                previewContent = '无法预览此文件类型';
            }

            if (!previewFloat) {
                previewFloat = document.createElement('div');
                previewFloat.className = 'preview-float';
                document.body.appendChild(previewFloat);
            }

            previewFloat.innerHTML = `
                                                     <div style="font-weight:bold;">${fileName}</div>
                                                     <div style="margin-top:4px;">${previewContent}</div>
                                                     `;

            const rect = target.getBoundingClientRect();
            let top = rect.top + window.scrollY - previewFloat.offsetHeight - 8;
            let left = rect.left + window.scrollX;

            // Adjust position if it overflows the viewport
            if (top < window.scrollY) {
                top = rect.bottom + window.scrollY + 8;
            }

            if (left + previewFloat.offsetWidth > window.innerWidth) {
                left = window.innerWidth - previewFloat.offsetWidth - 8;
            }

            previewFloat.style.top = `${top}px`;
            previewFloat.style.left = `${left}px`;
            previewFloat.style.display = 'block';
        }

        document.addEventListener('mousemove', (e) => {
            if (previewFloat) {
                const x = e.clientX;
                const y = e.clientY;

                const windowWidth = window.innerWidth;
                const windowHeight = window.innerHeight;
                const previewWidth = previewFloat.offsetWidth;
                const previewHeight = previewFloat.offsetHeight;

                let newX = x;
                let newY = y;

                // 如果右侧溢出，则调整到左侧
                if (x + previewWidth > windowWidth) {
                    newX = x - previewWidth;
                }

                // 如果底部溢出，则调整到顶部
                if (y + previewHeight > windowHeight) {
                    newY = y - previewHeight;
                }

                previewFloat.style.left = `${newX}px`;
                previewFloat.style.top = `${newY}px`;
            }
        });

        document.getElementById('serverFiles').addEventListener('mouseleave', function (e) {
            if (previewFloat) {
                document.body.removeChild(previewFloat);
                previewFloat = null;
            }
        });

        function traverseFileSystem(dir) {
            const result = [];
            const entries = dir.entries();
            let hasHiddenFiles = false;

            for (const entry of entries) {
                const isHidden = entry.name.startsWith('.');
                if (isHidden) {
                    hasHiddenFiles = true;
                }

                if (entry.isFile) {
                    result.push({
                        name: entry.name,
                        size: entry.size,
                        type: 'file',
                        lastModified: entry.lastModified,
                        url: entry.url,
                    });
                } else if (entry.isDirectory) {
                    result.push({
                        name: entry.name,
                        size: 0,
                        type: 'directory',
                        lastModified: entry.lastModified,
                        url: entry.url,
                    });
                }
            }

            // 按照文件名排序
            result.sort((a, b) => a.name.localeCompare(b.name));

            return { result, hasHiddenFiles };
        }

        function displayFiles(files) {
            const serverFilesTable = document.getElementById('serverFiles');
            serverFilesTable.innerHTML = '';

            if (files.length === 0) {
                serverFilesTable.innerHTML = '<tr><td colspan="3" style="text-align:center;">没有文件</td></tr>';
                return;
            }

            files.forEach((file) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                                                     <td class="filename"><a href="${file.url}" class="icon ${file.type}" ${file.type === 'directory' ? 'data-type="dir"' : ''}>${file.name}</a></td>
                                                     <td class="filesize">${file.size > 0 ? (file.size / 1024).toFixed(1) + ' KB' : '-'}</td>
                                                     <td class="filetime">${formatDate(file.lastModified)}</td>
                                                     `;
                serverFilesTable.appendChild(tr);
            });
        }

        function formatDate(timestamp) {
            if (!timestamp) return '-';
            const date = new Date(timestamp);
            return date.toLocaleString('zh-CN', {
                year: 'numeric',
                month: '2-digit',
                day: '2-digit',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit',
            });
        }

        function updateTableRows(result) {
            const { result: files, hasHiddenFiles } = result;
            const serverFilesTable = document.getElementById('serverFiles');
            serverFilesTable.innerHTML = '';

            if (files.length === 0) {
                serverFilesTable.innerHTML = '<tr><td colspan="3" style="text-align:center;">没有文件</td></tr>';
                return;
            }

            files.forEach((file) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                                                     <td class="filename"><a href="${file.url}" class="icon ${file.type}" ${file.type === 'directory' ? 'data-type="dir"' : ''}>${file.name}</a></td>
                                                     <td class="filesize">${file.size > 0 ? (file.size / 1024).toFixed(1) + ' KB' : '-'}</td>
                                                     <td class="filetime">${formatDate(file.lastModified)}</td>
                                                     `;
                serverFilesTable.appendChild(tr);
            });

            // 如果存在隐藏文件，则显示提示
            if (hasHiddenFiles) {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                                                     <td colspan="3" style="color:red;text-align:center;">
                                                     注意：此文件夹中包含隐藏文件，某些文件可能未显示。
                                                     </td>
                                                     `;
                serverFilesTable.appendChild(tr);
            }
        }

        // 新的上传区域样式
        const uploadSection = `
                                                     <div style="margin: 20px 0;">
                                                     <button id="uploadButton" class="pure-button pure-button-primary" style="width: 100%;" onclick="document.getElementById('fileInput').click();">
                                                     上传文件
                                                     </button>
                                                     <input type="file" id="fileInput" style="display:none;" multiple />
                                                     </div>
`;

        // 将上传区域插入到表格上方
        document.addEventListener('DOMContentLoaded', () => {
            const mainSection = document.querySelector('.main');
            const uploadDiv = document.createElement('div');
            uploadDiv.innerHTML = uploadSection;
            mainSection.insertBefore(uploadDiv, mainSection.firstChild);
        });

        // 处理文件上传
        document.getElementById('fileInput').addEventListener('change', async (e) => {
            const files = Array.from(e.target.files);
            if (files.length === 0) return;

            // 显示加载提示
            const loadingIndicator = document.createElement('div');
            loadingIndicator.className = 'loading-indicator';
            loadingIndicator.innerText = 'Uploading files, please wait...';
            document.body.appendChild(loadingIndicator);

            try {
                await uploadFiles(files);
            } catch (error) {
                console.error('Error uploading files:', error);
                alert('文件上传失败');
            } finally {
                document.body.removeChild(loadingIndicator);
            }
        });

        async function uploadFiles(files) {
            const zip = new JSZip();
            const folder = zip.folder('uploads');

            files.forEach((file) => {
                folder.file(file.name, file);
            });

            const content = await zip.generateAsync({ type: 'blob' });

            const formData = new FormData();
            formData.append('file', content, 'uploads.zip');

            await fetch('/upload', {
                method: 'POST',
                body: formData,
            });
        }

        function getCookie(name) {
            let cookieArr = document.cookie.split(";");

            for (let i = 0; i < cookieArr.length; i++) {
                let cookiePair = cookieArr[i].split("=");
                if (decodeURIComponent(cookiePair[0].trim()) === name) {
                    return decodeURIComponent(cookiePair[1]);
                }
            }
            return null;
        }

        const token = getCookie("token");
        if (token) {
            fetchFileSystemData();
        } else {
            document.getElementById('serverFiles').innerHTML = '<tr><td colspan="3" style="text-align:center;">未登录，无法访问文件系统</td></tr>';
        }

        async function fetchFileSystemData(path = '') {
            const response = await fetch(`/api/files?path=${encodeURIComponent(path)}`, {
                headers: {
                    'Authorization': `Bearer ${token}`,
                },
            });

            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const data = await response.json();
            updateTableRows(data);
        }

        // 新的上传区域样式
        const uploadSection = `
                                                     <div style="margin: 20px 0;">
                                                     <input type="file" id="fileInput" style="display:none;" multiple />
                                                     <button id="uploadButton" class="pure-button pure-button-primary" style="width: 100%;" onclick="document.getElementById('fileInput').click();">
                                                     上传文件
                                                     </button>
                                                     </div>
`;

        // 将上传区域插入到表格上方
        document.addEventListener('DOMContentLoaded', () => {
            const mainSection = document.querySelector('.main');
            const uploadDiv = document.createElement('div');
            uploadDiv.innerHTML = uploadSection;
            mainSection.insertBefore(uploadDiv, mainSection.firstChild);
        });

        document.getElementById('fileInput').addEventListener('change', async function (e) {
            const files = e.target.files;
            if (files.length === 0) return;

            // 显示加载提示
            const loading = document.createElement('div');
            loading.className = 'loading';
            loading.innerText = '文件上传中，请稍候...';
            document.body.appendChild(loading);

            try {
                await new Promise((resolve, reject) => {
                    setTimeout(resolve, 2000); // Simulate a delay
                });
                const formData = new FormData();
                for (const file of files) {
                    formData.append('files[]', file);
                }

                const response = await fetch('/upload', {
                    method: 'POST',
                    body: formData,
                });

                if (!response.ok) {
                    throw new Error('网络错误，无法上传文件');
                }

                alert('文件上传成功');
                location.reload();
            } catch (error) {
                alert(error.message);
            } finally {
                document.body.removeChild(loading);
            }
        });
    </script>
    <style>
        .upload-progress {
            width: 100%;
            background: #eee;
            border-radius: 4px;
            margin: 8px0;
            height: 22px;
            position: relative;
        }

        .upload-progress-bar {
            height: 100%;
            background: #0078e7;
            border-radius: 4px;
            width: 0%;
            transition: width0.2s;
        }

        .upload-progress-text {
            position: absolute;
            left: 0;
            right: 0;
            top: 0;
            bottom: 0;
            text-align: center;
            line-height: 22px;
            color: #fff;
            font-size: 13px;
        }
    </style>
    <script>
        // 优化上传逻辑
        function createProgressBar() {
            const bar = document.createElement('div');
            bar.className = 'upload-progress';
            const inner = document.createElement('div');
            inner.className = 'upload-progress-bar';
            const text = document.createElement('div');
            text.className = 'upload-progress-text';
            text.innerText = '0%';
            bar.appendChild(inner);
            bar.appendChild(text);
            return { bar, inner, text };
        }

        function setUploadButtonDisabled(disabled) {
            var btn = document.getElementById('uploadButton');
            if (btn) {
                btn.disabled = disabled;
                if (disabled) {
                    btn.classList.add('pure-button-disabled');
                } else {
                    btn.classList.remove('pure-button-disabled');
                }
            }
        }

        function setupUpload() {
            const fileInput = document.getElementById('fileInput');
            const uploadButton = document.getElementById('uploadButton');
            if (!fileInput || !uploadButton) return;

            fileInput.addEventListener('change', async function (e) {
                const files = Array.from(e.target.files);
                if (files.length === 0) return;
                setUploadButtonDisabled(true);

                //进度条区域
                let progressArea = document.getElementById('uploadProgressArea');
                if (!progressArea) {
                    progressArea = document.createElement('div');
                    progressArea.id = 'uploadProgressArea';
                    uploadButton.parentNode.appendChild(progressArea);
                }
                progressArea.innerHTML = '';

                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const { bar, inner, text } = createProgressBar();
                    progressArea.appendChild(bar);
                    text.innerText = `正在上传: ${file.name}`;
                    await uploadSingleFile(file, inner, text);
                }
                setUploadButtonDisabled(false);
                fileInput.value = '';
                alert('文件上传完成');
                location.reload();
            });
        }

        function uploadSingleFile(file, barElem, textElem) {
            return new Promise((resolve, reject) => {
                const formData = new FormData();
                formData.append('files[]', file);
                const xhr = new XMLHttpRequest();
                xhr.open('POST', '/upload', true);
                xhr.upload.onprogress = function (e) {
                    if (e.lengthComputable) {
                        const percent = Math.round((e.loaded / e.total) * 100);
                        barElem.style.width = percent + '%';
                        textElem.innerText = `${file.name} (${percent}%)`;
                    }
                };
                xhr.onload = function () {
                    if (xhr.status === 200) {
                        barElem.style.width = '100%';
                        textElem.innerText = `${file.name} (100%) 上传完成`;
                        resolve();
                    } else {
                        textElem.innerText = `${file.name} 上传失败`;
                        reject();
                    }
                };
                xhr.onerror = function () {
                    textElem.innerText = `${file.name} 上传失败`;
                    reject();
                };
                xhr.send(formData);
            });
        }

        document.addEventListener('DOMContentLoaded', setupUpload);
    </script>
</body>
</html>